clock:
  type: Real

guids:
  generation: Random

name: monolith

rest:
  allowedHosts:
    - localhost:3000
  auth:
    jwtClaimPrefix: https://limberapp.io/
    jwtIssuer: https://limber.auth0.com/
    jwtLeeway: 20 # 20 seconds.
    jwkDomain: limber.auth0.com
  parallelization:
    connectionGroupSize: 16
    workerGroupSize: 32
    callGroupSize: 64
  port:
    type: EnvironmentVariable
    name: PORT
  serverName: Limber
  shutDown:
    gracePeriodMillis: 5000 # 5 seconds.
    timeoutMillis: 12000 # 12 seconds.

restClient:
  baseUrls:
    self: http://localhost:8080/

server:
  lifecycle:
    startupDelayMs: 2000 # 2 seconds.
    shutdownDelayMs: 4000 # 4 seconds.

sql:
  jdbcUrl:
    type: EnvironmentVariable
    name: LIMBER_SQL_JDBC_URL
  username:
    type: EnvironmentVariable
    name: LIMBER_SQL_USERNAME
  password:
    type: GcpSecret
    name: LIMBER_SQL_PASSWORD
  properties:
    socketFactory: com.google.cloud.sql.postgres.SocketFactory
    cloudSqlInstance:
      type: EnvironmentVariable
      name: LIMBER_SQL_INSTANCE_NAME
      ipTypes: PUBLIC
  migrations:
    run: true
    cleanOnValidationError: false
    cleanDisabled: true
    locations:
      - db/limber/migration/common
      - db/limber/migration/gcp
    defaultSchema: public
    schemas: [organization]
  connectionTimeoutMs: 2000
  minimumIdle: 8
  maximumPoolSize: 32
